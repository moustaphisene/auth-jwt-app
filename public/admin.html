<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="admin-styles.css">
</head>
<body>
<div class="admin-container" id="admin-container" style="display: none;">
    <aside class="sidebar">
        <h2>Admin Panel</h2>
        <nav>
            <ul>
                <li><a href="#">Dashboard</a></li>
                <li><a href="#">Users</a></li>
                <li><a href="#">Settings</a></li>
                <li><a href="#" id="logout">Logout</a></li>
            </ul>
        </nav>
    </aside>
    <main class="main-content">
        <header>
            <h1>Dashboard</h1>
            <p>Welcome to the admin dashboard</p>
        </header>
        <section class="cards">
            <div class="card">
                <h3>Users</h3>
                <p>Manage your users</p>
            </div>
            <div class="card">
                <h3>Settings</h3>
                <p>Configure your settings</p>
            </div>
            <div class="card">
                <h3>Reports</h3>
                <p>View your reports</p>
            </div>
        </section>
    </main>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function() {
        const token = localStorage.getItem('token');
        if (!token) {
            window.location.href = 'login.html';
            return;
        }

        fetch('http://localhost:3000/me', {
            method: 'GET',
            headers: {
                'x-access-token': token
            }
        })
            .then(response => {
                if (response.status === 200) {
                    document.getElementById('admin-container').style.display = 'flex';
                } else {
                    localStorage.removeItem('token');
                    window.location.href = 'login.html';
                }
            })
            .catch(error => {
                console.error('Error:', error);
                localStorage.removeItem('token');
                window.location.href = 'login.html';
            });

        document.getElementById('logout').addEventListener('click', function() {
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        });
    });
</script>
</body>
</html>
